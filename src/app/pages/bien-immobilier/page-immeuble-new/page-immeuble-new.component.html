<div class="container-xl px-4 mt-4">
  <!-- Account page navigation-->

  <hr class="mt-0 mb-4" />
  <div class="row">
    <div class="col-md-4">
      <!-- Profile picture card-->
      <div class="card mb-4 mb-xl-0">
        <div class="card-header">Image d'illustration</div>
        <div class="card-body text-center">
          <!-- Profile picture image-->
          <img
            class="img-account-profile rounded-circle mb-2"
            src="assets/bien-immobilier.png"
            width="120px"
            height="120px"
            alt=""
          />
        </div>
      </div>
    </div>
    <div class="col-md-8">
      <!-- Account details card-->
      <div class="card mb-4">

        <div class="card-header font-weight-bold" >
          Informations sur le Bien l'Etage
        </div>
        <div class="card-body">

          <!-- FORM POUR APPARTEMENT -->
          <form
            *ngIf="immeubleForm"
            [formGroup]="immeubleForm"
          >
            <div class="row gx-3 mb-3">
              <div class="col-md-6">
                <ng-container
                  *ngIf="immeubleState$ | async as state"
                  [ngSwitch]="state.dataState"
                >
                  <ng-container *ngSwitchCase="ImmeubleStateEnum.INITIAL">
                    <div class="spinner-border text-primary" role="status">
                      <span class="sr-only">Loading...</span>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="ImmeubleStateEnum.ERROR">
                    <div class="p-2">
                      Erreur: {{ state.errorMessage | json }}
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="ImmeubleStateEnum.LOADING">
                    <div class="spinner-border text-primary" role="status">
                      <span class="sr-only">Loading...</span>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="ImmeubleStateEnum.LOADED">
                    <label class="small mb-1" for="inputFirstName"
                      >Immeuble</label
                    >
                    <select

                      formControlName="idImmeuble"
                      name="idImmeuble"
                      class="form-control form-control-lg"
                      [ngClass]="{
                        'is-invalid':
                          submitted &&
                          immeubleForm.controls.idImmeuble.errors
                      }"
                    >
                      <option [value]="0">Sélection un Immeuble</option>
                      <option [value]="0">Aucun Immeuble</option>
                      <option
                        [value]="immeub.id"
                        *ngFor="let immeub of state.immeubles"
                      >
                        {{ immeub.abrvNomImmeuble }}
                      </option>
                    </select>


                  </ng-container>
                </ng-container>
              </div>
              <div class="col-md-6">
                <ng-container
                  *ngIf="immeubleState$ | async as immeubleState"
                  [ngSwitch]="immeubleState.dataState"
                >
                  <ng-container *ngSwitchCase="ImmeubleStateEnum.INITIAL">
                    <div class="spinner-border text-primary" role="status">
                      <span class="sr-only">Loading...</span>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="ImmeubleStateEnum.LOADING">
                    <div class="spinner-border text-primary" role="status">
                      <span class="sr-only">Loading...</span>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="ImmeubleStateEnum.ERROR">
                    <div class="p-2">
                      Erreur : {{ immeubleState.errorMessage }}
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="ImmeubleStateEnum.LOADED">
                    <label class="small mb-1" for="inputLastName">Etage</label>
                    <select
                      formControlName="idEtage"
                      name="idEtage"
                      class="form-control form-control-lg w-auto"
                      [ngClass]="{
                        'is-invalid':
                          submitted && immeubleForm.controls.idEtage.errors
                      }"
                    >
                      <option [value]="">Aucun Etage</option>
                      <option
                        [value]="immeuble.id"
                        *ngFor="let immeuble of immeubleState.immeubles"
                      >
                        {{ immeuble.id }}
                      </option>
                    </select>
                    <div
                      *ngIf="
                        submitted && immeubleForm.controls.idEtage.errors
                      "
                      class="invalid-feedback"
                    >
                      <div
                        *ngIf="immeubleForm.controls.idEtage.errors.required"
                      >
                        * Veuillez saisir un étage
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </div>
              <div class="row gx-3 mb-3">
                <!-- Form Group (organization name)-->
                <div class="col-md-6">
                  <label class="small mb-1" for="inputOrgName"
                    >Désignation</label
                  >
                  <input
                    formControlName="nomApp"
                    class="form-control"
                    name="nomApp"
                    type="text"
                    [ngClass]="{
                      'is-invalid':
                        submitted && immeubleForm.controls.nomApp.errors
                    }"
                    required
                  />
                  <div
                    *ngIf="submitted && immeubleForm.controls.nomApp.errors"
                    class="invalid-feedback"
                  >
                    <div
                      *ngIf="immeubleForm.controls.nomApp.errors.required"
                    >
                      *Champ obligatoire
                    </div>
                  </div>
                  <div class="valid-feedback">Ok!</div>
                </div>
                <!-- Form Group (location)-->
                <div class="col-md-6">
                  <label class="small mb-1" for="inputLocation"
                    >Nombre de Pièces</label
                  >
                  <input
                    formControlName="nbrPieceApp"
                    class="form-control"
                    name="inputLocation"
                    type="number"
                  />
                </div>
                <div class="col-md-6">
                  <label class="small mb-1" for="inputLocation"
                    >Nombre de Chambres</label
                  >
                  <input
                    formControlName="nbreChambreApp"
                    class="form-control"
                    name="inputLocation"
                    type="number"
                  />
                </div>
                <div class="col-md-6">
                  <label class="small mb-1" for="inputLocation"
                    >Nombre de Salons</label
                  >
                  <input
                    formControlName="nbrSalonApp"
                    class="form-control"
                    name="inputLocation"
                    type="number"
                  />
                </div>
                <div class="col-md-6">
                  <label class="small mb-1" for="inputLocation"
                    >Nombre de Salle d'eau</label
                  >
                  <input
                    formControlName="nbreSalleEauApp"
                    class="form-control"
                    name="inputLocation"
                    type="number"
                  />
                </div>
                <!-- Default checkbox -->
                <div class="form-check">
                  <input
                    formControlName="meubleApp"
                    mdbCheckbox
                    class="form-check-input"
                    type="checkbox"
                    value=""
                    id="flexCheckDefault"
                  />
                  <label class="form-check-label" for="flexCheckDefault">
                    Meublé
                  </label>
                </div>
                <!-- Checked checkbox -->
                <div class="form-check">
                  <input
                    formControlName="residence"
                    mdbCheckbox
                    class="form-check-input"
                    type="checkbox"
                    value=""
                    id="flexCheckChecked"
                  />
                  <label class="form-check-label" for="flexCheckChecked">
                    Est une résidence
                  </label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col d-flex justify-content-end">
                <button
                  type="button"
                  class="btn btn-danger mr-2"
                  data-dismiss="modal"
                  (click)="onClose()"
                  id="closeAgenceButton"
                >
                  <i class="fas fa-ban"></i>
                  Close
                </button>
                <button
                  type="button"
                  class="btn btn-primary"
                  (click)="onSaveEtage()"
                >
                  <i class="fas fa-save"></i>
                  Enregistrer
                </button>
              </div>
            </div>
          </form>
          <!-- FORM POUR LES ETAGES -->
        </div>
      </div>
    </div>
  </div>
</div>
